# 游戏版本发布流程要解决的核心问题

随着手机游戏行业的逐渐成熟和竞争的日益白热化，手机游戏的研发复杂度越来越高，玩家对于手机游戏的品质要求也越来越高。

研发内容复杂度的提升必然要求团队规模的扩大，目前手机游戏项目常见的团队规模少则五六十人，多则两三百人。在大规模团队协作的现实情况下，为了确保游戏版本能够按照计划以较高的品质发布，一套完整的游戏版本发布流程及规范是必不可少的。

## 游戏资产数据的管理

游戏的研发过程是一个数据驱动的过程，从上游的创意产生，到中游的资产制作，再到下游的测试发布，对游戏生命周期中所有数据的管理是重中之重的工作。

资产数据的管理工作离不开版本控制工具。版本控制工具根据架构不同，分为分布式和客户端/服务器式两种。分布式是每个协作者都拥有完整的资产仓库，其代表为git；客户端/服务器式有一个拥有完整资产仓库的服务器，每个协作者只需要维护其关注的部分，代表为SVN，Perforce等。

游戏项目的工程存储容量一般很大，C/S架构的版本控制工具更适合游戏的研发过程，一是策划、美术、程序等不同团队成员所要关注的资产是不同的，C/S架构对不同资产的频繁提交修改不需要相互等待，二是C/S架构在数据传输速度上有明显优势。SVN为免费软件，有成本优势；Perforce为商业软件，其图形化界面使用方便，账号系统有完整的权限管理体系，分支相关功能也更完善。如果预算充足的话笔者更推荐使用Perforce。

有了版本控制工具就可以建立游戏资产主干和分支的概念。游戏资产的主干对应游戏研发的主时间轴，本文称之为**开发主干**。一般来说，通过两位版本号“a.b”来对游戏内容的版本进行划分，游戏的研发计划也根据版本号来制定。

在**开发主干**上版本1.0的内容研发完毕时，它就可以进入发布阶段。此时，我们需要复制**开发主干**到**开发分支1.0**，并在这个分支上继续制作版本1.0相关的内容，主要是进行内容优化及BUG修复。**开发主干**可以继续往后制作版本1.1的内容，这个过程和版本1.0的发布并行进行。

为了确保版本1.0的品质，其进入发布阶段之后的所有改动都应该被监控。为了达到这个目的，我们需要基于**开发分支1.0**的内容再拉出另外两条分支**开发分支1.0（测试）**和**开发分支1.0（发布）**。

对于**开发分支1.0**来说，所有团队成员都有权限进行修改。该分支用于日常开发，侧重于开发效率。

对于**开发分支1.0（测试）**来说，其修改内容只能来源于**开发分支1.0**。只有各部门负责人有权限进行合并修改，并且他们需要对修改内容进行审核。QA部门使用**开发分支1.0（测试）**制作游戏产品，进行内容测试。该分支用于测试，侧重于产品品质。

对于**开发分支1.0（发布）**来说，其修改内容只能来源于**开发分支1.0（测试）**。该分支是在**开发分支1.0（测试）**的品质达到发布标准时复制其内容得到。该分支用于制作最终发布交付给玩家的游戏产品。

## 游戏运行环境的划分

手机游戏一般是基于C/S架构的网络游戏，游戏产品（客户端程序和服务器程序）的运行需要一个网络环境。为了保证不同版本内容的游戏产品都能够正常运行，游戏客户端程序需要连接对应的服务器程序，因此我们需要为之划分不同的运行环境。

通常来说，运行环境需要分为开发、测试、预发布、正式发布四种。开发环境用于日常的研发工作，测试环境用于QA的测试工作，正式发布环境是交付给玩家的游戏产品运行的环境，预发布环境则是正式发布环境的镜像，用来验证即将发布的游戏产品和解决正式发布环境中的问题。

整套运行环境包含客户端程序和服务器程序运行的所有依赖项。客户端程序的依赖项通常包括配置和资源热更新地址，网关服务器地址（用于验证版本号和拉取服务器列表），第三方服务（如SDK登陆验证，语音服务等）的地址等。服务器程序的依赖项通常包括程序运行的云服务器地址，GM平台的部署地址，运维平台的部署地址，第三方服务（如SDK登陆验证，充值，屏蔽字验证）的地址等。

游戏的运行环境需要对应在版本控制工具中的游戏资产分支，其目的就是为了验证该分支的内容是否和预想的一致。

## 结语

总的来说，对游戏资产数据做好管理，并划分好对应的游戏产品的运行环境，整个游戏版本的发布流程就很明确了。

游戏资产从开发到测试，再到预发布，最后进入正式发布，每个阶段的转换都需要按照操作规范来进行，并加以监管，这样最终到达玩家手中的游戏产品的品质才会有保证。
